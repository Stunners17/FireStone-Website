<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Order Coal</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
    <header class="header">
      <h1> FireStone Coal </h1>
    </header>


     <div id="tabs-top2">
            <a href="index.html">Back</a>
     </div>


        <section class="order">
            <h2>Your order</h2>
            <p>Fill in the form below to place your order.</p>

            <form 
               id="orderform"
               action="https://formspree.io/f/mlglglwo" 
               method="POST"

            >
                <label>First Names</label>
                <input 
                type="text"
                name="first names" 
                placeholder="Your first names" 
                required
                >

                <label>Last Name</label>
                <input 
                type="text" 
                name="last name"
                placeholder="Your last name" 
                required
                >

                <label>Address</label>
                <input 
                type="text" 
                placeholder="e.g 70Sekhu st" 
                required
                >

                <label>type of order</label>
                <input 
                  type="text" 
                  name="coalType"
                  placeholder="e.g 50kg sack or 18.40kg" 
                >
                
                <label>Specials</label>
                <input 
                  type="text" 
                  name="specials"
                  placeholder="e.g 3x18.40kg or 50kg sack special"
                >

                <label>Quantity (Sacks) </label>
                <input 
                  type="number" 
                  name="quantity"
                  min="1" 
                  placeholder="e.g 2" 
                  required
                >
                <label>Contact Number</label>
                <input 
                  type="tel" 
                  name="contactNumber"
                  placeholder="e.g 0781234567" 
                  required
                >
                <label>Time of Collection</label>
                <input 
                  type="time" 
                  name="collectionTime"
                  required
                >

                <label for="deliveryOption">Choose Delivery or Pickup:</label>
                <select id="deliveryOption" name="orderType" required>
                    <option value="">Select option</option>
                    <option value="delivery" required>Delivery</option>
                    <option value="pickup" required="">Pickup</option>
                </select>

                <button type="submit">Submit Order</button>
            </form>

        <script>
          (function () {
            const form = document.getElementById('orderform');
            const deliverySelect = document.getElementById('deliveryOption');

            form.addEventListener('submit', function (e) {
              e.preventDefault();
              const option = deliverySelect.value;

              if (!option) {
                alert('Please select a delivery or pickup option.');
                return;
              }

              if (option === 'pickup') {
                // If pickup chosen, redirect to pickup confirmation page
                // (Do not submit to external form endpoint)
                window.location.href = 'pickup-confirmation.html';
                return;
              }

              if (option === 'delivery') {
                // For delivery, submit form data to the configured action via fetch,
                // then redirect to comingsoon.html when done (or on error).
                const action = form.action;
                const method = (form.method || 'POST').toUpperCase();
                const formData = new FormData(form);

                fetch(action, {
                  method: method,
                  body: formData,
                  headers: {
                    'Accept': 'application/json'
                  }
                }).then(function (response) {
                  // Regardless of response, go to coming soon / delivery page
                  window.location.href = 'comingsoon.html';
                }).catch(function (err) {
                  console.error('Form submit error:', err);
                  window.location.href = 'comingsoon.html';
                });
              }
            });
          })();
        </script>

        </section>

        <div id="tabs-bottom">
          <a href="contact.html">CONTACT</a>
          <a href="feedback.html">FEEDBACK</a>
        </div>



        <footer>
            <p> 2026 Coal Supplier</p>
        </footer>



        
    </body>
</html>